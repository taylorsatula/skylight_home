<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Skylight Widgets - Library Test</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .test-section {
      margin-bottom: 48px;
      padding-bottom: 32px;
      border-bottom: 1px solid var(--surface-divider);
    }
    .test-section h2 {
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-muted);
      margin-bottom: 16px;
    }
    .test-row {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      align-items: flex-start;
    }
    .test-controls {
      margin-top: 12px;
    }
    .test-controls button {
      margin-right: 8px;
    }
  </style>
</head>
<body>

  <!-- SVG Symbol Definitions (copy from reference) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <defs>
      <symbol id="icon-lightbulb" viewBox="0 0 24 24">
        <path d="M12 2a7 7 0 0 0-7 7c0 2.54 1.4 4.75 3.47 5.9.17.1.28.27.33.46L9 17a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2l.2-1.64c.05-.19.16-.36.33-.46A7 7 0 0 0 12 2z" fill="currentColor"/>
        <path d="M9 21h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </symbol>
      <symbol id="icon-fan" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="2" fill="currentColor"/>
        <path d="M12 2c-1.5 0-3 1.5-3 4 0 1.5.5 3 3 4M12 2c1.5 0 3 1.5 3 4 0 1.5-.5 3-3 4M2 12c0-1.5 1.5-3 4-3 1.5 0 3 .5 4 3M2 12c0 1.5 1.5 3 4 3 1.5 0 3-.5 4-3M22 12c0-1.5-1.5-3-4-3-1.5 0-3 .5-4 3M22 12c0 1.5-1.5 3-4 3-1.5 0-3-.5-4-3M12 22c-1.5 0-3-1.5-3-4 0-1.5.5-3 3-4M12 22c1.5 0 3-1.5 3-4 0-1.5-.5-3-3-4" fill="currentColor"/>
      </symbol>
      <symbol id="icon-lock" viewBox="0 0 24 24">
        <rect x="5" y="11" width="14" height="10" rx="2" fill="currentColor"/>
        <path d="M8 11V7a4 4 0 1 1 8 0v4" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </symbol>
      <symbol id="icon-bolt" viewBox="0 0 24 24">
        <polygon points="13,2 3,14 12,14 11,22 21,10 12,10" fill="currentColor"/>
      </symbol>
      <symbol id="icon-homepod" viewBox="0 0 24 24">
        <ellipse cx="12" cy="19" rx="6" ry="2" fill="currentColor" opacity="0.3"/>
        <path d="M7 18V8a5 5 0 0 1 10 0v10c0 1.1-2.24 2-5 2s-5-.9-5-2z" fill="currentColor"/>
      </symbol>
      <symbol id="icon-airplay" viewBox="0 0 24 24">
        <path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <polygon points="12,13 17,21 7,21" fill="currentColor"/>
      </symbol>
      <symbol id="icon-star" viewBox="0 0 24 24">
        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26" fill="currentColor"/>
      </symbol>
      <symbol id="icon-photo" viewBox="0 0 24 24">
        <rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
        <path d="M21 15l-5-5L5 21" fill="none" stroke="currentColor" stroke-width="1.5"/>
      </symbol>
      <symbol id="icon-edit" viewBox="0 0 24 24">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" fill="none" stroke="currentColor" stroke-width="1.5"/>
      </symbol>
      <symbol id="icon-refresh" viewBox="0 0 24 24">
        <path d="M23 4v6h-6M1 20v-6h6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </symbol>
      <symbol id="icon-external" viewBox="0 0 24 24">
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <polyline points="15 3 21 3 21 9" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <line x1="10" y1="14" x2="21" y2="3" stroke="currentColor" stroke-width="1.5"/>
      </symbol>
      <symbol id="icon-globe" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <ellipse cx="12" cy="12" rx="4" ry="10" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <path d="M2 12h20" fill="none" stroke="currentColor" stroke-width="1.5"/>
      </symbol>
      <symbol id="icon-alert" viewBox="0 0 24 24">
        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" fill="none" stroke="currentColor" stroke-width="2"/>
        <line x1="12" y1="9" x2="12" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <circle cx="12" cy="17" r="1" fill="currentColor"/>
      </symbol>
      <symbol id="icon-chevron" viewBox="0 0 24 24">
        <path d="M9 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </symbol>
      <symbol id="icon-clock" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <polyline points="12 6 12 12 16 14" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </symbol>
      <symbol id="icon-users" viewBox="0 0 24 24">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <circle cx="9" cy="7" r="4" fill="none" stroke="currentColor" stroke-width="1.5"/>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </symbol>
      <symbol id="icon-x" viewBox="0 0 24 24">
        <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </symbol>
      <symbol id="icon-check-circle" viewBox="0 0 24 24">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        <polyline points="22 4 12 14.01 9 11.01" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </symbol>

      <!-- Weather Icons -->
      <symbol id="weather-sun" viewBox="0 0 64 64">
        <circle cx="32" cy="32" r="12" fill="#ffd60a"/>
        <g stroke="#ffd60a" stroke-width="3" stroke-linecap="round">
          <line x1="32" y1="8" x2="32" y2="14"/><line x1="32" y1="50" x2="32" y2="56"/>
          <line x1="8" y1="32" x2="14" y2="32"/><line x1="50" y1="32" x2="56" y2="32"/>
          <line x1="15" y1="15" x2="19.2" y2="19.2"/><line x1="44.8" y1="44.8" x2="49" y2="49"/>
          <line x1="15" y1="49" x2="19.2" y2="44.8"/><line x1="44.8" y1="19.2" x2="49" y2="15"/>
        </g>
      </symbol>
      <symbol id="weather-partly-cloudy" viewBox="0 0 64 64">
        <circle cx="22" cy="24" r="10" fill="#ffd60a"/>
        <g stroke="#ffd60a" stroke-width="2.5" stroke-linecap="round">
          <line x1="22" y1="6" x2="22" y2="10"/><line x1="6" y1="24" x2="10" y2="24"/>
          <line x1="10" y1="12" x2="13" y2="15"/><line x1="10" y1="36" x2="13" y2="33"/>
        </g>
        <path d="M52 44c4.4 0 8-3.6 8-8s-3.6-8-8-8c-.5 0-1 0-1.5.1C49.3 22.5 44.1 18 38 18c-7.7 0-14 6.3-14 14 0 .3 0 .7.1 1C19.2 33.5 16 37 16 41c0 4.4 3.6 8 8 8h28z" fill="#e5e5ea"/>
      </symbol>
      <symbol id="weather-cloudy" viewBox="0 0 64 64">
        <path d="M50 46c5 0 9-4 9-9s-4-9-9-9c-.5 0-1 .1-1.5.1C47.2 21.8 41.4 17 34.5 17 26 17 19 24 19 32.5c0 .4 0 .8.1 1.2C14 34.3 10 38.5 10 44c0 5.5 4.5 10 10 10h30z" fill="#a8b5c4"/>
      </symbol>
      <symbol id="weather-rain" viewBox="0 0 64 64">
        <path d="M48 36c4.4 0 8-3.6 8-8s-3.6-8-8-8c-.5 0-1 0-1.5.1C45.3 14.5 40.1 10 34 10c-7.7 0-14 6.3-14 14 0 .3 0 .7.1 1C15.2 25.5 12 29 12 33c0 4.4 3.6 8 8 8h28z" fill="#a8b5c4"/>
        <g stroke="#5ac8fa" stroke-width="2.5" stroke-linecap="round">
          <line x1="22" y1="46" x2="20" y2="54"/><line x1="32" y1="44" x2="30" y2="52"/>
          <line x1="42" y1="46" x2="40" y2="54"/><line x1="27" y1="52" x2="25" y2="58"/>
          <line x1="37" y1="52" x2="35" y2="58"/>
        </g>
      </symbol>
      <symbol id="weather-storm" viewBox="0 0 64 64">
        <path d="M48 32c4.4 0 8-3.6 8-8s-3.6-8-8-8c-.5 0-1 0-1.5.1C45.3 10.5 40.1 6 34 6c-7.7 0-14 6.3-14 14 0 .3 0 .7.1 1C15.2 21.5 12 25 12 29c0 4.4 3.6 8 8 8h28z" fill="#6b7280"/>
        <polygon points="36,34 28,48 34,48 30,60 44,44 38,44 42,34" fill="#ffd60a"/>
        <g stroke="#5ac8fa" stroke-width="2" stroke-linecap="round" opacity="0.7">
          <line x1="20" y1="42" x2="18" y2="50"/><line x1="48" y1="40" x2="46" y2="48"/>
        </g>
      </symbol>
      <symbol id="weather-night" viewBox="0 0 64 64">
        <path d="M36 12c-12.2 0-22 9.8-22 22s9.8 22 22 22c5.5 0 10.5-2 14.4-5.3-2.3.8-4.7 1.3-7.4 1.3-12.2 0-22-9.8-22-22 0-7.5 3.8-14.2 9.6-18.2-1-.5-1.7-.8-2.6-.8z" fill="#5e5ce6"/>
        <circle cx="48" cy="16" r="2" fill="#ffd60a"/>
        <circle cx="54" cy="26" r="1.5" fill="#ffd60a" opacity="0.7"/>
        <circle cx="42" cy="10" r="1.5" fill="#ffd60a" opacity="0.5"/>
      </symbol>
    </defs>
  </svg>

  <h1 style="font-size: 28px; margin-bottom: 32px;">Skylight Widget Library Test</h1>

  <!-- Test sections will be populated by JavaScript -->
  <div id="test-container"></div>

  <script src="skylight-widgets.js"></script>
  <script>
    const container = document.getElementById('test-container');

    function createSection(title, subtitle) {
      const section = document.createElement('div');
      section.className = 'test-section';
      section.innerHTML = `<h2>${title}${subtitle ? ` <span style="opacity:0.5;font-weight:400">${subtitle}</span>` : ''}</h2><div class="test-row"></div>`;
      container.appendChild(section);
      return section.querySelector('.test-row');
    }

    function addLabel(row, text) {
      const label = document.createElement('div');
      label.style.cssText = 'width:100%;font-size:12px;color:var(--text-muted);margin-top:16px;margin-bottom:-8px;';
      label.textContent = text;
      row.appendChild(label);
    }

    // ============================================================
    // BADGE - All Variants
    // ============================================================
    const badgeRow = createSection('Badge', 'size: default | variants: pending, info, warning, alert, success, error');
    ['pending', 'info', 'warning', 'alert', 'success', 'error'].forEach(variant => {
      const badge = SkylightWidgets.create('badge', {
        data: { label: variant.charAt(0).toUpperCase() + variant.slice(1), variant }
      });
      badgeRow.appendChild(badge.element);
    });

    // ============================================================
    // NOTE - All Sizes
    // ============================================================
    const noteRow = createSection('Note', 'sizes: sm, md, lg');

    // Size: sm
    addLabel(noteRow, 'size: sm');
    const noteSm = SkylightWidgets.create('note', {
      size: 'sm',
      data: { title: 'Quick Note', content: 'Short reminder text.', timestamp: 'Updated 2 hours ago' }
    });
    noteRow.appendChild(noteSm.element);

    const noteSmAccent = SkylightWidgets.create('note', {
      size: 'sm',
      data: { title: 'Status', content: 'All Clear', timestamp: 'Just now', accent: 'green' }
    });
    noteRow.appendChild(noteSmAccent.element);

    // Size: md
    addLabel(noteRow, 'size: md');
    const noteMd = SkylightWidgets.create('note', {
      size: 'md',
      data: { title: 'Quick Note', content: 'Remember to check the HVAC filter this weekend. Also call about the garage door opener.', timestamp: 'Updated 2 hours ago' }
    });
    noteRow.appendChild(noteMd.element);

    const noteMdAccent = SkylightWidgets.create('note', {
      size: 'md',
      data: { title: 'Alert', content: 'Front door unlocked', timestamp: '5 min ago', accent: 'orange' }
    });
    noteRow.appendChild(noteMdAccent.element);

    // Size: lg
    addLabel(noteRow, 'size: lg');
    const noteLg = SkylightWidgets.create('note', {
      size: 'lg',
      data: { title: 'Message', content: 'Welcome Home!', timestamp: null }
    });
    noteRow.appendChild(noteLg.element);

    const noteLgAccent = SkylightWidgets.create('note', {
      size: 'lg',
      data: { title: 'Status', content: 'All Systems Normal', timestamp: 'Last checked: Just now', accent: 'blue' }
    });
    noteRow.appendChild(noteLgAccent.element);

    // ============================================================
    // PILL - All Categories
    // ============================================================
    const pillRow = createSection('Pill', 'size: default | categories: climate, lights, security, energy, muted');
    const pillData = [
      { icon: 'icon-fan', label: 'Climate', status: '53-70°', category: 'climate' },
      { icon: 'icon-lightbulb', label: 'Lights', status: '3 On', category: 'lights' },
      { icon: 'icon-lock', label: 'Security', status: 'Armed', category: 'security' },
      { icon: 'icon-bolt', label: 'Energy', status: 'Less Clean', category: 'energy' },
      { icon: 'icon-homepod', label: 'Speakers & TVs', status: 'None Playing', category: null }
    ];
    pillData.forEach(data => {
      const pill = SkylightWidgets.create('pill', { data });
      pillRow.appendChild(pill.element);
    });

    // ============================================================
    // TILE - All Sizes and States
    // ============================================================
    const tileRow = createSection('Tile', 'sizes: default, thermostat | states: off, on, active, error');

    // Size: default - All states
    addLabel(tileRow, 'size: default');
    const tileOff = SkylightWidgets.create('tile', {
      data: { name: 'Ceiling Light', status: 'Off', icon: 'icon-lightbulb', state: 'off' }
    });
    tileRow.appendChild(tileOff.element);

    const tileOn = SkylightWidgets.create('tile', {
      data: { name: 'Railing Lights', status: 'Off', icon: 'icon-lightbulb', state: 'on' }
    });
    tileRow.appendChild(tileOn.element);

    const tileActive = SkylightWidgets.create('tile', {
      data: { name: 'Bedside Tables', status: '100%', icon: 'icon-lightbulb', state: 'active' }
    });
    tileRow.appendChild(tileActive.element);

    const tileError = SkylightWidgets.create('tile', {
      data: { name: 'Fireplace', status: 'No Response', icon: 'icon-lightbulb', state: 'error' }
    });
    tileRow.appendChild(tileError.element);

    // Speaker variant
    addLabel(tileRow, 'size: default (speaker variant)');
    const tileSpeaker = SkylightWidgets.create('tile', {
      data: { name: 'HomePod', status: 'Not Playing', icon: 'icon-homepod', speaker: true, accessory: 'icon-airplay', state: 'off' }
    });
    tileRow.appendChild(tileSpeaker.element);

    const tileSpeakerActive = SkylightWidgets.create('tile', {
      data: { name: 'Living Room', status: 'Playing Jazz', icon: 'icon-homepod', speaker: true, accessory: 'icon-airplay', state: 'active' }
    });
    tileRow.appendChild(tileSpeakerActive.element);

    // Size: thermostat
    addLabel(tileRow, 'size: thermostat');
    const thermostatOff = SkylightWidgets.create('tile', {
      size: 'thermostat',
      data: { name: 'Ecobee', status: 'Idle', temp: 70, state: 'off' }
    });
    tileRow.appendChild(thermostatOff.element);

    const thermostatActive = SkylightWidgets.create('tile', {
      size: 'thermostat',
      data: { name: 'Ecobee', status: 'Heat to 66°', temp: 68, state: 'active' }
    });
    tileRow.appendChild(thermostatActive.element);

    const thermostatCool = SkylightWidgets.create('tile', {
      size: 'thermostat',
      data: { name: 'Nest', status: 'Cool to 72°', temp: 75, state: 'active' }
    });
    tileRow.appendChild(thermostatCool.element);

    // ============================================================
    // PHOTO FRAME - Sizes sm, md (omitting xxl)
    // ============================================================
    const photoRow = createSection('Photo Frame', 'sizes: sm, md (xxl omitted)');

    addLabel(photoRow, 'size: sm');
    const photoSm1 = SkylightWidgets.create('photo-frame', {
      size: 'sm',
      data: { src: 'https://images.unsplash.com/photo-1518837695005-2083093ee35b?w=300&h=300&fit=crop', caption: 'Beach', meta: 'June' }
    });
    photoRow.appendChild(photoSm1.element);

    const photoSm2 = SkylightWidgets.create('photo-frame', {
      size: 'sm',
      data: { src: 'https://images.unsplash.com/photo-1541701494587-cb58502866ab?w=300&h=300&fit=crop', showCaption: false }
    });
    photoRow.appendChild(photoSm2.element);

    const photoSmPlaceholder = SkylightWidgets.create('photo-frame', {
      size: 'sm',
      data: {}
    });
    photoRow.appendChild(photoSmPlaceholder.element);

    addLabel(photoRow, 'size: md');
    const photoMd1 = SkylightWidgets.create('photo-frame', {
      size: 'md',
      data: { src: 'https://images.unsplash.com/photo-1682687220742-aba13b6e50ba?w=400&h=300&fit=crop', caption: 'Morning Hike', meta: 'Owens Cross Roads' }
    });
    photoRow.appendChild(photoMd1.element);

    const photoMd2 = SkylightWidgets.create('photo-frame', {
      size: 'md',
      data: { src: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop', caption: 'Swiss Alps', meta: 'Summer 2024' }
    });
    photoRow.appendChild(photoMd2.element);

    // ============================================================
    // CALENDAR MONTH
    // ============================================================
    const calRow = createSection('Calendar Month', 'size: default');
    const calendar = SkylightWidgets.create('calendar-month', {
      data: { month: 11, year: 2024, today: 13 }
    });
    calRow.appendChild(calendar.element);

    const calendarJan = SkylightWidgets.create('calendar-month', {
      data: { month: 0, year: 2025, today: 1, selectedDays: [15, 16, 17] }
    });
    calRow.appendChild(calendarJan.element);

    // ============================================================
    // EVENT LIST
    // ============================================================
    const eventRow = createSection('Event List', 'size: default');
    const eventList = SkylightWidgets.create('event-list', {
      data: {
        sections: [
          {
            date: 'Saturday, Dec 13',
            isToday: true,
            events: [
              { title: 'Rosa quoting Home Cleaning', startTime: '10:00AM', endTime: '11:00AM' },
              { title: 'Galaxy of Lights', startTime: '6:00PM', endTime: '7:00PM' }
            ]
          },
          {
            date: 'Monday, Dec 15',
            events: [
              { title: 'Hanukkah (1st day)', allDay: true, holiday: true, icon: 'icon-star', barColor: 'holiday' }
            ]
          },
          {
            date: 'Wednesday, Dec 17',
            events: [
              { title: 'Team Meeting', startTime: '9:00AM', endTime: '10:00AM', barColor: 'purple' },
              { title: 'Dentist Appointment', startTime: '2:00PM', endTime: '3:00PM', barColor: 'success' }
            ]
          }
        ]
      }
    });
    eventRow.appendChild(eventList.element);

    // ============================================================
    // WEATHER - All Sizes
    // ============================================================
    const weatherRow = createSection('Weather', 'sizes: minimal, compact, full');

    addLabel(weatherRow, 'size: minimal');
    const weatherMinimal1 = SkylightWidgets.create('weather', {
      size: 'minimal',
      data: { temp: 72, condition: 'Sunny', icon: 'weather-sun' }
    });
    weatherRow.appendChild(weatherMinimal1.element);

    const weatherMinimal2 = SkylightWidgets.create('weather', {
      size: 'minimal',
      data: { temp: 58, condition: 'Rainy', icon: 'weather-rain' }
    });
    weatherRow.appendChild(weatherMinimal2.element);

    const weatherMinimal3 = SkylightWidgets.create('weather', {
      size: 'minimal',
      data: { temp: 45, condition: 'Clear', icon: 'weather-night' }
    });
    weatherRow.appendChild(weatherMinimal3.element);

    const weatherMinimal4 = SkylightWidgets.create('weather', {
      size: 'minimal',
      data: { temp: 38, condition: 'Cloudy', icon: 'weather-cloudy' }
    });
    weatherRow.appendChild(weatherMinimal4.element);

    addLabel(weatherRow, 'size: compact');
    const weatherCompact1 = SkylightWidgets.create('weather', {
      size: 'compact',
      data: { temp: 68, condition: 'Partly Cloudy', icon: 'weather-partly-cloudy', high: 72, low: 54 }
    });
    weatherRow.appendChild(weatherCompact1.element);

    const weatherCompact2 = SkylightWidgets.create('weather', {
      size: 'compact',
      data: { temp: 82, condition: 'Sunny', icon: 'weather-sun', high: 88, low: 71 }
    });
    weatherRow.appendChild(weatherCompact2.element);

    addLabel(weatherRow, 'size: full');
    const weatherFull = SkylightWidgets.create('weather', {
      size: 'full',
      data: {
        temp: 62,
        condition: 'Thunderstorms',
        icon: 'weather-storm',
        high: 68,
        low: 52,
        location: 'Owens Cross Roads',
        feelsLike: 58,
        humidity: 85,
        wind: '12 mph',
        precipitation: '0.5"',
        alert: 'Severe Thunderstorm Watch until 8 PM',
        forecast: [
          { name: 'Today', icon: 'weather-storm', precip: 80, low: 52, high: 68, barLeft: 20, barWidth: 50 },
          { name: 'Sun', icon: 'weather-cloudy', precip: 20, low: 48, high: 65, barLeft: 15, barWidth: 55 },
          { name: 'Mon', icon: 'weather-sun', low: 45, high: 70, barLeft: 10, barWidth: 65 }
        ]
      }
    });
    weatherRow.appendChild(weatherFull.element);

    const weatherFullNoAlert = SkylightWidgets.create('weather', {
      size: 'full',
      data: {
        temp: 75,
        condition: 'Sunny',
        icon: 'weather-sun',
        high: 82,
        low: 68,
        location: 'San Francisco',
        feelsLike: 73,
        humidity: 55,
        wind: '8 mph',
        forecast: [
          { name: 'Today', icon: 'weather-sun', low: 68, high: 82, barLeft: 30, barWidth: 60 },
          { name: 'Tue', icon: 'weather-partly-cloudy', low: 65, high: 78, barLeft: 25, barWidth: 55 },
          { name: 'Wed', icon: 'weather-rain', precip: 60, low: 58, high: 70, barLeft: 15, barWidth: 50 }
        ]
      }
    });
    weatherRow.appendChild(weatherFullNoAlert.element);

    // ============================================================
    // PACKAGE - All Sizes
    // ============================================================
    const packageRow = createSection('Package', 'sizes: compact, full, list');

    addLabel(packageRow, 'size: compact');
    const packageCompact1 = SkylightWidgets.create('package', {
      size: 'compact',
      data: {
        carrier: 'amazon',
        title: 'Anker USB-C Hub',
        subtitle: 'Out for delivery',
        etaLabel: 'Today',
        eta: 'By 8 PM',
        etaSoon: true
      }
    });
    packageRow.appendChild(packageCompact1.element);

    const packageCompact2 = SkylightWidgets.create('package', {
      size: 'compact',
      data: {
        carrier: 'ups',
        title: 'Motorcycle Parts',
        subtitle: 'In transit · Birmingham, AL',
        etaLabel: 'ETA',
        eta: 'Mon, Dec 16'
      }
    });
    packageRow.appendChild(packageCompact2.element);

    const packageCompact3 = SkylightWidgets.create('package', {
      size: 'compact',
      data: {
        carrier: 'fedex',
        title: 'Camera Lens',
        subtitle: 'Delivered',
        etaLabel: 'Delivered',
        eta: 'Today 2:30 PM',
        delivered: true
      }
    });
    packageRow.appendChild(packageCompact3.element);

    addLabel(packageRow, 'size: full (with progress bar)');
    const packageFullProgress = SkylightWidgets.create('package', {
      size: 'full',
      data: {
        carrier: 'amazon',
        title: 'Anker USB-C Hub',
        subtitle: 'Amazon Logistics',
        tracking: 'TBA934857294857',
        statusBadge: { label: 'Out', variant: 'alert' },
        highlight: 'out',
        progress: {
          steps: ['complete', 'complete', 'complete', 'current'],
          labels: ['Ordered', 'Shipped', 'Transit', 'Out'],
          activeIndex: 3
        },
        delivery: {
          label: 'Arriving Today',
          date: 'Saturday, December 13',
          time: 'By 8:00 PM',
          variant: 'success'
        }
      }
    });
    packageRow.appendChild(packageFullProgress.element);

    addLabel(packageRow, 'size: full (with timeline)');
    const packageFullTimeline = SkylightWidgets.create('package', {
      size: 'full',
      data: {
        carrier: 'fedex',
        title: 'Camera Lens',
        subtitle: 'FedEx Express',
        tracking: '7489274892748927',
        statusBadge: { label: 'Transit', variant: 'warning' },
        timeline: [
          { title: 'Out for Delivery', time: 'Pending', pending: true },
          { title: 'Arrived at Local Facility', location: 'Huntsville, AL', time: '6:42 AM', status: 'current' },
          { title: 'Departed FedEx Hub', location: 'Nashville, TN', time: 'Dec 12', status: 'complete' },
          { title: 'Shipment Picked Up', location: 'Los Angeles, CA', time: 'Dec 11', status: 'complete' }
        ]
      }
    });
    packageRow.appendChild(packageFullTimeline.element);

    addLabel(packageRow, 'size: list');
    const packageList = SkylightWidgets.create('package', {
      size: 'list',
      data: {
        title: 'Incoming Packages',
        count: '4 active',
        packages: [
          { carrier: 'amazon', title: 'Anker USB-C Hub', status: 'Out for delivery', statusColor: 'var(--status-out)', eta: 'Today', etaToday: true },
          { carrier: 'ups', title: 'Motorcycle Parts', status: 'In transit', eta: 'Mon' },
          { carrier: 'fedex', title: 'Camera Lens - Canon RF 85mm', status: 'In transit', eta: 'Sun' },
          { carrier: 'usps', title: 'eBay Purchase', status: 'Delayed', statusColor: 'var(--status-delayed)', eta: 'Dec 15' },
          { carrier: 'dhl', title: 'International Shipment', status: 'Customs', eta: 'Dec 18' }
        ]
      }
    });
    packageRow.appendChild(packageList.element);

    // ============================================================
    // RECIPE - All Sizes
    // ============================================================
    const recipeRow = createSection('Recipe', 'sizes: compact, md');

    addLabel(recipeRow, 'size: md');
    const recipeMd1 = SkylightWidgets.create('recipe', {
      size: 'md',
      data: {
        image: 'https://images.unsplash.com/photo-1546549032-9571cd6b27df?w=600&h=450&fit=crop',
        title: 'Rigatoni with Spicy Calabrian Sausage',
        sourceLogo: 'NYT',
        source: ' Cooking · Recipe of the Day',
        time: '35 min',
        servings: '4 servings',
        rating: 4
      }
    });
    recipeRow.appendChild(recipeMd1.element);

    const recipeMd2 = SkylightWidgets.create('recipe', {
      size: 'md',
      data: {
        image: 'https://images.unsplash.com/photo-1512621776951-a57141f2eefd?w=600&h=450&fit=crop',
        title: 'Mediterranean Grain Bowl',
        sourceLogo: 'BA',
        source: ' Bon Appetit',
        time: '25 min',
        servings: '2 servings',
        rating: 5
      }
    });
    recipeRow.appendChild(recipeMd2.element);

    addLabel(recipeRow, 'size: compact');
    const recipeCompact1 = SkylightWidgets.create('recipe', {
      size: 'compact',
      data: {
        image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=200&h=200&fit=crop',
        title: 'Sheet-Pan Pizza',
        sourceLogo: 'NYT',
        source: ' Cooking',
        time: '45 min'
      }
    });
    recipeRow.appendChild(recipeCompact1.element);

    const recipeCompact2 = SkylightWidgets.create('recipe', {
      size: 'compact',
      data: {
        image: 'https://images.unsplash.com/photo-1484723091739-30a097e8f929?w=200&h=200&fit=crop',
        title: 'French Toast',
        sourceLogo: 'SE',
        source: ' Serious Eats',
        time: '20 min'
      }
    });
    recipeRow.appendChild(recipeCompact2.element);

    const recipeCompact3 = SkylightWidgets.create('recipe', {
      size: 'compact',
      data: {
        image: 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=200&h=200&fit=crop',
        title: 'Pancakes',
        sourceLogo: 'ATK',
        source: " America's Test Kitchen",
        time: '30 min'
      }
    });
    recipeRow.appendChild(recipeCompact3.element);

    // ============================================================
    // WEBVIEW - All Sizes
    // ============================================================
    const webviewRow = createSection('WebView', 'sizes: sm, md, lg');

    addLabel(webviewRow, 'size: sm');
    const webviewSmLoading = SkylightWidgets.create('webview', {
      size: 'sm',
      data: { title: 'Weather Radar', loading: true }
    });
    webviewRow.appendChild(webviewSmLoading.element);

    const webviewSmError = SkylightWidgets.create('webview', {
      size: 'sm',
      data: { title: 'Network Status', error: 'Unable to load content' }
    });
    webviewRow.appendChild(webviewSmError.element);

    addLabel(webviewRow, 'size: md');
    const webviewMdLoading = SkylightWidgets.create('webview', {
      size: 'md',
      data: { title: 'Traffic Map', loading: true }
    });
    webviewRow.appendChild(webviewMdLoading.element);

    const webviewMdError = SkylightWidgets.create('webview', {
      size: 'md',
      data: { title: 'Security Camera', error: 'Camera offline' }
    });
    webviewRow.appendChild(webviewMdError.element);

    addLabel(webviewRow, 'size: lg');
    const webviewLgLoading = SkylightWidgets.create('webview', {
      size: 'lg',
      data: { title: 'Dashboard', loading: true }
    });
    webviewRow.appendChild(webviewLgLoading.element);

    // ============================================================
    // REACTIVE UPDATE TEST
    // ============================================================
    const updateRow = createSection('Reactive Update Test', 'demonstrates widget.update()');

    const dynamicTile = SkylightWidgets.create('tile', {
      data: { name: 'Demo Light', status: 'Off', icon: 'icon-lightbulb', state: 'off' }
    });
    updateRow.appendChild(dynamicTile.element);

    const dynamicWeather = SkylightWidgets.create('weather', {
      size: 'minimal',
      data: { temp: 72, condition: 'Sunny', icon: 'weather-sun' }
    });
    updateRow.appendChild(dynamicWeather.element);

    const dynamicNote = SkylightWidgets.create('note', {
      size: 'md',
      data: { title: 'Dynamic Note', content: 'Click buttons below to update widgets!', timestamp: 'Just created' }
    });
    updateRow.appendChild(dynamicNote.element);

    const controls = document.createElement('div');
    controls.className = 'test-controls';
    controls.innerHTML = `
      <button class="btn btn--primary" id="toggleTile">Toggle Light</button>
      <button class="btn" id="updateWeather">Change Weather</button>
      <button class="btn" id="updateNote">Update Note</button>
    `;
    updateRow.appendChild(controls);

    let lightOn = false;
    document.getElementById('toggleTile').onclick = () => {
      lightOn = !lightOn;
      dynamicTile.update({
        status: lightOn ? '100%' : 'Off',
        state: lightOn ? 'active' : 'off'
      });
    };

    const weatherStates = [
      { temp: 72, condition: 'Sunny', icon: 'weather-sun' },
      { temp: 65, condition: 'Cloudy', icon: 'weather-cloudy' },
      { temp: 58, condition: 'Rainy', icon: 'weather-rain' },
      { temp: 45, condition: 'Night', icon: 'weather-night' }
    ];
    let weatherIndex = 0;
    document.getElementById('updateWeather').onclick = () => {
      weatherIndex = (weatherIndex + 1) % weatherStates.length;
      dynamicWeather.update(weatherStates[weatherIndex]);
    };

    document.getElementById('updateNote').onclick = () => {
      dynamicNote.update({
        content: 'Content updated at ' + new Date().toLocaleTimeString(),
        timestamp: 'Updated just now'
      });
    };

    // ============================================================
    // SUMMARY
    // ============================================================
    console.log('Available widget types:', SkylightWidgets.getTypes());
    console.log('Widget library loaded successfully!');
  </script>

</body>
</html>
